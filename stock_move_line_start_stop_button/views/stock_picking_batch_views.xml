<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="stock_batch_picking_form" model="ir.ui.view">
        <field name="model">stock.picking.batch</field>
        <field name="inherit_id" ref="stock_picking_batch_extended.stock_batch_picking_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='move_line_ids']//field[@name='product_id']" position="before">
                <field name="picking_partner_id" string="Customer"/>
            </xpath>
            <xpath expr="//field[@name='move_lines']//field[@name='product_id']" position="before">
                <field name="picking_partner_id" string="Customer"/>
            </xpath>
            <xpath expr="//field[@name='move_line_ids']//field[@name='qty_done']" position="after">
                <field name="analytic_line_id" invisible="1" />
                <field name="analytic_line_with_end_date" invisible="1" />
                <button name="button_arrival" string="Arrival" type="object" icon="fa-check text-success"
                    attrs="{'invisible': [('analytic_line_id', '!=', False)]}"/>
                <button name="button_end" string="End" type="object" icon="fa-check"
                    attrs="{'invisible': ['|', ('analytic_line_id', '=', False), ('analytic_line_with_end_date', '=', True)]}"/>
            </xpath>
        </field>
    </record>
</odoo>
