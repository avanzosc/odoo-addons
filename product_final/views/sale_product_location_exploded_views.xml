<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Tree view for listing "Final Products" -->
    <record model="ir.ui.view" id="sale_product_location_exploded_tree_view">
      <field name="name">sale.product.location.exploded.tree.view</field>
      <field name="model">product.location.exploded</field>
      <field name="arch" type="xml">
        <tree editable="bottom">
          <field name="product_final_id"/>
          <field name="position"/>
          <field name="product_id"/>
        </tree>
      </field>
    </record>
  
    <!-- Action for Menu item "Inventory/Settings/Products/Final Product" -->
    <record id="action_sale_product_final" model="ir.actions.act_window">
        <field name="name">Products exploded location</field>
        <field name="res_model">product.location.exploded</field>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="sale_product_location_exploded_tree_view"/>
    </record>

    <!-- Menu item "Inventory/Settings/Products/Final Products" -->
	<menuitem id="sale_product_final_menu" name="Products exploded location" sequence="10"
	 parent="sale.product_menu_catalog" action="action_sale_product_final"/>

    <!-- Filter & Group by (product, product final, position) -->
    <record id="view_product_final_filter" model="ir.ui.view">
        <field name="name">Final Product Filters</field>
	    <field name="model">product.location.exploded</field>
	    <field name="arch" type="xml">
	        <search>
	            <field name="product_final_id"/>
                <field name="position"/>
                <field name="product_id"/>
	            <group expand="0" string="Group By">
                    <filter name="filter_product" string="Product" domain="[]" context="{'group_by': 'product_id'}"/>
                    <filter name="filter_product_final" string="Product Final" domain="[]" context="{'group_by': 'product_final_id'}"/>
                    <filter name="filter_position" string="Position" domain="[]" context="{'group_by': 'position'}"/>
	            </group>
	       </search>
	    </field>
	</record>
</odoo>
