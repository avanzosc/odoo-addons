<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="report_evaluation_certification_printing" name="Survey: print page">
        <t t-call="web.external_layout">
            <page>
                <t t-set="survey_form_readonly" t-value="true" />
                <br />
                <br />
                <div class="wrap">
                    <div class="o_survey_print container">
                        <div class="py-5 mt32 mb5">
                            <t t-if="o.survey_id.title">
                                <div t-field="o.survey_id.title" class="oe_no_empty mb-3" />
                            </t>
                            <t t-if="o.survey_id.description">
                                <div t-field="o.survey_id.description" class="oe_no_empty" />
                            </t>
                            <t t-if="review" t-call="o.survey_id.survey_button_retake" />
                        </div>
                        <div role="form">
                            <fieldset disabled="disabled">
                                <t t-set="questions_to_display" t-value="o._get_print_questions()" />
                                <t t-foreach="o.survey_id.question_and_page_ids" t-as="question">
                                    <t
                                        t-if="question.is_page and (any(q in questions_to_display for q in question.question_ids) or not is_html_empty(question.description))">
                                        <hr t-if="question != o.survey_id.page_ids[0]" />
                                        <div class="o_page_header">
                                            <h1 t-field="question.title" />
                                            <div t-if="question.description"
                                                t-field="question.description" class="oe_no_empty" />
                                        </div>
                                    </t>
                                    <t
                                        t-if="not question.is_page and not o or (question in o.predefined_question_ids)">
                                        <t t-set="answer_lines"
                                            t-value="o.user_input_line_ids.filtered(lambda line: line.question_id == question)" />
                                        <div class="js_question-wrapper" t-att-id="question.id">
                                            <h2>
                                                <span t-field="question.title" />
                                                <span t-if="question.constr_mandatory"
                                                    class="text-danger">*</span>
                                                <span t-if="scoring_display_correction"
                                                    class="badge badge-pill"
                                                    t-att-data-score-question="question.id" />
                                            </h2>
                                            <t t-if="question.description">
                                                <div class="text-muted oe_no_empty"
                                                    t-field="question.description" />
                                            </t>
                                            <t t-if="question.question_type == 'text_box'">
                                                <t t-call="survey.question_text_box" />
                                            </t>
                                            <t t-if="question.question_type == 'char_box'">
                                                <t t-call="survey.question_char_box" />
                                            </t>
                                            <t t-if="question.question_type == 'numerical_box'">
                                                <t t-call="survey.question_numerical_box" />
                                            </t>
                                            <t t-if="question.question_type == 'date'">
                                                <t t-call="survey.question_date" />
                                            </t>
                                            <t t-if="question.question_type == 'datetime'">
                                                <t t-call="survey.question_datetime" />
                                            </t>
                                            <t t-if="question.question_type == 'simple_choice'">
                                                <t t-call="survey.question_simple_choice" />
                                            </t>
                                            <t t-if="question.question_type == 'multiple_choice'">
                                                <t t-call="survey.question_multiple_choice" />
                                            </t>
                                            <t t-if="question.question_type == 'matrix'">
                                                <t t-call="survey.question_matrix" />
                                            </t>
                                            <div
                                                class="o_survey_question_error overflow-hidden border-0 py-0 px-3 alert alert-danger"
                                                role="alert" />
                                        </div>
                                    </t>
                                </t>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </page>
        </t>
    </template>


    <template id="report_survey_pdf_custom_module">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="survey_pdf_report.report_evaluation_certification_printing"
                    t-lang="o.partner_id.lang" />
            </t>
        </t>
    </template>


    <record id="action_report_survey_print" model="ir.actions.report">
        <field name="name">Print Survey PDF</field>
        <field name="model">survey.user_input</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">survey_pdf_report.report_survey_pdf_custom_module</field>
        <field name="report_file">survey_pdf_report.report_survey_pdf_custom_module</field>
        <field name="print_report_name">'Printed Survey'</field>
        <field name="binding_model_id" ref="survey.model_survey_user_input" />
        <field name="binding_type">report</field>
    </record>
</odoo>