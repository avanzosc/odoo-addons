<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="add_matrix_article_filter" priority="1" inherit_id="survey.question_matrix">

        <xpath expr="//tr[@t-foreach='question.matrix_row_ids']" position="replace">
            <t t-foreach="question.matrix_row_ids" t-as="row_label">
                <t t-if="row_label.question_article_ids.question_normative_id.start_date 
                &lt;= answer_lines..inspected_building_id.service_start-date 
                &lt; row_label.question_article_ids.question_normative_id.start_date">
                    <tr class="bg-white text-white" t-att-id="row_label.id">
                        <th class="fw-normal text-start">
                            <span t-field="row_label.value" />
                        </th>
                        <t t-foreach="question.suggested_answer_ids" t-as="col_label">
                            <t t-set="answer" t-value="answer_lines.filtered(lambda line: line.suggested_answer_id == col_label and line.matrix_row_id == row_label)"/>
                            <td t-att-class="'o_survey_matrix_btn text-primary position-relative %s'
                        % ('o_survey_selected' if answer else '')">
                                <input t-att-type="'checkbox' if question.matrix_subtype == 'multiple' else 'radio'" t-att-name="'%s_%s' % (question.id, row_label.id)" t-att-value='col_label.id' t-att-checked="'checked' if answer else None" t-att-data-row-id="row_label.id" t-att-data-selection-key="letters[item_idx] if useKeySelection else ''" class="o_survey_form_choice_item d-none"/>
                                <!-- Casilla de verificación no seleccionada -->
                                <i t-att-class="'o_survey_matrix_empty_checkbox fa fa-%s position-relative'
                            % ('square-o' if question.matrix_subtype == 'multiple' else 'circle-thin')"></i>
                                <!-- Casilla de verificación seleccionada -->
                                <i t-att-class="'fa fa-%s position-relative'
                            % ('check-square' if question.matrix_subtype == 'multiple' else 'check-circle')"></i>
                                <t t-call="survey.survey_selection_key">
                                    <t t-set="selection_key_class" t-value="'position-absolute float-end fw-bold %s' % ('o_survey_radio_btn' if question.matrix_subtype != 'multiple' else '')"/>
                                </t>
                                <t t-set="item_idx" t-value="item_idx + 1"/>
                            </td>
                        </t>
                    </tr>
                </t>
            </t>

        </xpath>
    </template>
</odoo> 