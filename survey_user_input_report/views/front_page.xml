<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="report_front_page" name="Portada">
        <style>
            * {
              font-size: 12px;
            }
            .columns {
                display: -webkit-box;
                -webkit-box-orient: vertical;
                padding: 0;
            }
            .row {
                display: -webkit-box;
                -webkit-box-orient: horizontal;
                padding: 0;
            }
            div, li{
                padding: 4px;
            }
        </style>

        <span style="text-align: center; font-weight: bold;">
            <t t-if="o.building_use_id.is_industrial">
                <h5>ACTA DE INSPECCIÓN PERIÓDICA ESTABLECIMIENTOS INDUSTRIALES</h5>
                <h6>INSTALACIÓN DE PROTECCIÓN CONTRA INCENDIOS</h6>
            </t>
            <t t-else="">
                <h5>ACTA DE INSPECCIÓN PERIÓDICA ESTABLECIMIENTOS NO INDUSTRIALES</h5>
                <h6>INSTALACIÓN DE PROTECCIÓN CONTRA INCENDIOS</h6>
            </t>
        </span>
        <t t-if="o.building_use_id.is_industrial">
            <p>Okatek Servicios y Control S.L., Organismo de Control habilitado según la acreditación ENAC Nº545 / EI862, en aplicación del artículo 22 del Reglamento de Instalaciones de Protección Contra Incendios en Establecimientos Industriales aprobado por el Real Decreto2267/2004, de 3 de diciembre</p>
        </t>
        <t t-else="">
            <p>Okatek Servicios y Control S.L., Organismo de Control habilitado según la acreditación ENAC Nº545 / EI862, en aplicación del artículo 22 del Reglamento de Instalaciones de Protección Contra Incendios aprobado por el Real Decreto 513/2017,de 22 de mayo</p>
        </t>
        <p>
            <span style="font-weight: bold;">CERTIFICA: </span> que en fecha <span t-field="o.inspection_start_date"/>
 el inspector que suscribe el <span t-field="o.act_number"/>
   ha realizado la inspección periódica de la instalación con las siguientes características</p>

    <!-- INICIO TABLA -->
    <div class="columns">
        <div class="row" style="border: 1px solid #ccc">
            <div style="width: 75%;">
                <span style="font-weight: bold;">TITULAR DE LA INSTALACIÓN:</span>
                <span t-field="o.inspected_building_id.name"/>
            </div>
            <div style="width: 25%; border-left: 1px solid #ccc">
                <span style="font-weight: bold;">NIF / CIF: </span>
                <span t-field="o.inspected_building_id.vat"/>
            </div>
        </div>
        <div class="row" style="border: 1px solid #ccc; margin-top: -1px;">
            <div>
                <span style="font-weight: bold;">DENOMINACIÓN DE LA INSTALACIÓN: AMPO FOUNDRY. AMPLIACIÓN MECANIZADO</span>
            </div>
        </div>
        <div class="columns" style="width: 100%; margin-top: -1px; border: 1px solid #ccc;">
            <div class="row">
                <div style="width: 20%; border-right: 1px dashed #ccc; font-weight: bold;">EMPLAZAMIENTO DE LA INSTALACIÓN:</div>
                <div class="columns" style="width: 80%;">
                    <div style="border-bottom: 1px dashed #ccc;">
                        <span t-field="o.inspected_building_id.name"/>
                    </div>
                    <div class="row">
                        <div style="width: 33.33%; border-right: 1px dashed #ccc;">POBLACION: <span t-field="o.inspected_building_id.street2"/>
                        </div>
                        <div style="width: 33.33%; border-right: 1px dashed #ccc;">PROVINCIA: <span t-field="o.inspected_building_id.street"/>
                        </div>
                        <div style="width: 33.33%;">CP.: <span t-field="o.inspected_building_id.zip"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="columns" style="width: 100%; margin-top: -1px; border: 1px solid #ccc;">
            <div class="row" style="border-bottom: 1px solid #ccc">
                <div style="width: 20%; border-right: 1px dashed #ccc; font-weight: bold;">CARACTERÍSTICAS ESTABLECIMIENTO</div>
                <div style="width: 80%;" class="column">
                    <div class="row" style="border-bottom: 1px dashed #ccc;">
                        <div style="width: 25%;">USO <span t-field="o.building_use_id.name"/>
                        </div>
                        <div style="width: 25%;">SUPERFICIE (m²): <span t-field="o.area"/>
                        </div>
                        <div style="width: 25%;">Nº PLANTAS: <span t-field="o.number_of_floors"/>
                        </div>
                    </div>
                    <div class="row">
                        <div style="width: 25%;">RESIDENCIAL
                        </div>
                        <div style="width: 25%;">PÚBLICO
                        </div>
                        <div style="width: 25%;">DOCENTE
                        </div>
                        <div style="width: 25%;">COMERCIAL
                        </div>
                    </div>
                    <div class="row" style="border-bottom: 1px dashed #ccc;">
                        <div style="width: 25%;">HOSPITALARIO
                        </div>
                        <div style="width: 25%;">PÚBLICA CONCURRENCIA
                        </div>
                        <div style="width: 25%;">APARCAMIENTO
                        </div>
                        <div style="width: 25%;">ADMINISTRATIVO X EST. USO INDUSTRIAL
                        </div>
                    </div>
                    <div class="row">
                        <div style="width: 40%;">NIVEL RIESGO INTRÍNSECO</div>
                        <div style="width: 5%;">
                            <t t-if="o.risk and 'BAJ' in str(o.risk)">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 15%;">BAJO</div>
                        <div style="width: 5%;">
                            <t t-if="o.risk and 'MEDI' in str(o.risk)">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 15%;">MEDIA</div>
                        <div style="width: 5%;">
                            <t t-if="o.risk and 'ALT' in str(o.risk)">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 15%;">ALTO</div>
                    </div>
                    <div class="row">
                        <div style="width: 40%;">CONFIGURACIÓN: </div>
                        <div style="width: 3%;">
                            <t t-if="o.configuration==A">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 9%;">A</div>
                        <div style="width: 3%;">
                            <t t-if="o.configuration==B">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 9%;">B</div>
                        <div style="width: 3%;">
                            <t t-if="o.configuration==C">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 9%;">C</div>
                        <div style="width: 3%;">
                            <t t-if="o.configuration==D">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 9%;">D</div>
                        <div style="width: 3%;">
                            <t t-if="o.configuration==E">
                                <span style="font-weight: bold;">X</span>
                            </t>
                        </div>
                        <div style="width: 9%;">E</div>
                    </div>
                </div>
            </div>
            <div class="columns" style="width: 100%; margin-bottom: -1px;">
                <div class="row" style="width: 100%;">
                    <div style="width: 20%;border-right: 1px dashed #ccc;">
                        <span style="font-weight: bold;">DOCUMENTACIÓN TÉCNICA</span>
                    </div>
                    <div class="columns" style="width: 80%; margin: 0 auto 0 0; ">
                        <div class="row">
                            <div style="width: 20%; border-bottom: 1px dashed #ccc; border-right: 1px dashed #ccc;">Proyecto</div>
                            <div style="width: 80%; border-bottom: 1px dashed #ccc; ">
                                <div class="columns">
                                    <div style="width: 100%;">
                                        <span style="font-weight: bold;">Título: </span>
                                        <span t-field="o.project_title"/>
                                    </div>
                                    <div class="row">
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Autor: </span>
                                            <span t-field="o.project_author_id"/>
                                        </div>
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Titulación: </span>
                                            <span t-field="o.project_author_degree"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Colegiado N.º: </span>
                                            <span t-field="o.project_author_license"/>
                                        </div>
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Fecha / N.º </span>
                                            <span t-field="o.project_approved_date"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="border-bottom: 1px dashed #ccc;">
                            <div style="width: 20%; border-right: 1px dashed #ccc;">Certificado Final</div>
                            <div style="width: 80%;">
                                <div class="columns">
                                    <div class="row">
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Autor: </span>
                                            <span t-field="o.dof_author_id"/>
                                        </div>
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Titulación: </span>
                                            <span t-field="o.dof_author_degree"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Colegiado N.º: </span>
                                            <span t-field="o.dof_author_license"/>
                                        </div>
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Fecha / N.º Visado: </span>
                                            <span t-field="o.dof_approved_date"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div style="width: 20%; border-bottom: 1px dashed #ccc; border-right: 1px dashed #ccc;">Certificado Instalador</div>
                            <div style="width: 80%; border-bottom: 1px dashed #ccc;">
                                <div class="columns">
                                    <div class="row">
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Empresa: </span>
                                            <span t-field="o.dof_author_id"/>
                                        </div>
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"></span>
                                            <!-- <span t-field="o.dof_author_degree"/> -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> EPI: </span>
                                            <span t-field="o.installer_epi"/>
                                        </div>
                                        <div style="width: 50%;">
                                            <span style="font-weight: bold;"> Fecha: </span>
                                            <span t-field="o.dof_approved_date"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="border: 1px solid #ccc; margin-top: -1px; ">
            <div style="width: 20%;">
                <span style="font-weight: bold;">REGLAMENTO APLICABLE:</span>
            </div>
            <t t-set="found_normative_filter" t-value="False"/>
            <t t-foreach="o.survey_id.question_and_page_ids" t-as="question">
                <t t-if="question.is_normative_filter and not found_normative_filter">
                    <t t-set="found_normative_filter" t-value="True"/>
                    <t t-set="answer_count" t-value="len(question.suggested_answer_ids)"/>
                    <t t-foreach="question.suggested_answer_ids" t-as="label">
                        <div t-att-style="'width:' + str(80 / answer_count) + '%; padding: 5px; border-left: 1px dashed #ccc'" t-esc="label.value"/>
                    </t>
                </t>
            </t>
        </div>
        <div class="row" style="border: 1px solid #ccc; margin-top: -1px;">
            <div style="width: 40%;">
                <span style="font-weight: bold;">Nº REGISTRO INSTALACIÓN:</span>
                <span t-field="o.installation_number"/>
            </div>
            <div style="width: 30%; border-left: 1px solid #ccc">
                <span style="font-weight: bold;">Nº EXPEDIENTE:</span>
                <span t-field="o.file_number"/>
            </div>

            <div style="width: 30%; border-left: 1px solid #ccc">
                <span style="font-weight: bold;">FECHA PUESTA EN SERVICIO:</span>
            </div>
        </div>

        <div class="row" style="border: 1px solid #ccc;margin-top: -1px;">
            <div style="width: 40%;">
                <span style="font-weight: bold;">TIPO DE INSPECCION:</span>
                <span t-field="o.inspection_type"/>
            </div>
            <div style="width: 30%;border-left: 1px solid #ccc">
                <span style="font-weight: bold;">FECHA:</span>
                <span t-field="o.inspection_start_date"/>
                <span> al </span>
                <span t-field="o.inspection_end_date"/>
            </div>
            <div style="width: 30%;border-left: 1px solid #ccc">
                <span style="font-weight: bold;">EQUIPOS:</span>
                <span t-field="o.equipment"/>
            </div>
        </div>

        <div class="row" style="border: 1px solid #ccc; margin-top: -1px;">
            <div style="width: 70%;">
                <span style="font-weight: bold;">EMPRESA MANTENEDORA:</span>
            </div>
            <div style="width: 30%;border-left: 1px solid #ccc">
                <span style="font-weight: bold;">EMI:</span>
            </div>
        </div>

    </div>


    <div class="container" style="border: 1px solid #ccc; margin-top: 5px;">
        <div style="width: 100%; font-weight: bold;">EQUIPOS Y SISTEMAS DE PROTECCIÓN CONTRA INCENDIOS DISPONIBLES EN ESTA INSTALACIÓN:</div>
        <div class="row" style="33">
            <t t-set="equipment_records" t-value="request.env['installed.equipment'].search([])"/>
            <div style="width: 33%;">
                <ul class="list-unstyled">
                    <t t-foreach="equipment_records[:len(equipment_records) // 3]" t-as="equipment">
                        <li>
                            <t t-if="equipment in o.installed_equipment_ids">
                                <strong>X</strong>
                            </t>
                            <t t-esc="equipment.name"/>
                        </li>
                    </t>
                </ul>
            </div>
            <div style="width: 33%;">
                <ul class="list-unstyled">
                    <t t-foreach="equipment_records[len(equipment_records) // 3: 2 * len(equipment_records) // 3]" t-as="equipment">
                        <li>
                            <t t-if="equipment in o.installed_equipment_ids">
                                <strong>X</strong>
                            </t>
                            <t t-esc="equipment.name"/>
                        </li>
                    </t>
                </ul>
            </div>
            <div style="width: 33%;">
                <ul class="list-unstyled">
                    <t t-foreach="equipment_records[2 * len(equipment_records) // 3:]" t-as="equipment">
                        <li>
                            <t t-if="equipment in o.installed_equipment_ids">
                                <strong>X</strong>
                            </t>
                            <t t-esc="equipment.name"/>
                        </li>
                    </t>
                </ul>
            </div>
        </div>
    </div>
</template>
</odoo>