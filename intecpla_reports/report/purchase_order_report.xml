<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <template
    id="report_purchasequotation_document_inh_intecpla2"
    inherit_id="purchase_stock.report_purchasequotation_document"
  >
        <t t-else="" position="replace" />
    </template>

    <template
    id="report_purchasequotation_document_inh_intecpla"
    inherit_id="purchase.report_purchasequotation_document"
  >
        <t t-call="web.external_layout" position="attributes">
            <attribute
        name="t-call"
      >intecpla_reports.external_layout_purchase</attribute>
        </t>
        <t t-set="address" position="replace">
            <t t-set="address">
                <br />
                <br />
                <div style="font-size:1rem">
                    <strong t-field="o.partner_id.name" />
                </div>
                <div style="font-size:1rem">
                    <span t-field="o.partner_id.street" />
                    <br />
                    <span t-field="o.partner_id.zip" />
                    <span t-field="o.partner_id.city" />
                    <span t-esc="o.partner_id.get_state_name()" />
                    <br />
                    <span t-field="o.partner_id.country_id.name" />
                </div>
            </t>
        </t>
        <t t-if="o.dest_address_id" position="replace">
            <t t-set="information_block">
                <div style="font-size:1rem">
                    <strong t-field="o.company_id.partner_id.name" />
                </div>
                <div style="font-size:1rem">
                    VAT: <span t-field="o.company_id.partner_id.vat" />
                    <br />
                    <span t-field="o.company_id.partner_id.street" />
                    <br />
                    <span t-field="o.company_id.partner_id.zip" />
                    <span t-field="o.company_id.partner_id.city" />
                    <span t-esc="o.company_id.partner_id.get_state_name()" />
                    <br />
                    <span t-field="o.company_id.partner_id.country_id.name" />
                    <br />
                    Phone: <span t-field="o.company_id.partner_id.phone" />
                    <br />
                    <span t-field="o.company_id.partner_id.email" />
                    <br />
                    <span t-field="o.company_id.partner_id.website" />
                </div>
            </t>
        </t>
        <h2 position="replace">
           <div id="informations" class="row mt32 mb32">
                <div t-if="o.date_order" class="col-auto mw-100 mb-2">
                    <strong>Date:</strong>
                    <p
            t-field="o.date_order"
            class="m-0"
            t-options='{"widget": "date"}'
          />
                </div>
                <div t-if="o.name" class="col-auto mw-100 mb-2">
                    <strong>Order:</strong>
                    <p t-field="o.name" class="m-0" />
                </div>
                <div t-if="o.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Code:</strong>
                    <p t-field="o.partner_id.ref" class="m-0" />
                </div>
                <div t-if="o.partner_id.vat" class="col-auto mw-100 mb-2">
                    <strong>VAT:</strong>
                    <p t-field="o.partner_id.vat" class="m-0" />
                </div>
                <div t-if="o.partner_id.phone" class="col-auto mw-100 mb-2">
                    <strong>Phone:</strong>
                    <p t-field="o.partner_id.phone" class="m-0" />
                </div>
            </div>
        </h2>

        <xpath expr="//table/thead/tr/th[3]" position="after">
            <th class="text-right"><strong>Price</strong></th>
            <th class="text-right"><strong>Amount</strong></th>
        </xpath>
        <xpath expr="//table/thead/tr/th[1]" position="before">
            <th class="text-left"><strong>Code</strong></th>
        </xpath>

        <xpath expr="//table/tbody/tr/td[3]" position="replace">
            <td class="text-right" style="font-size: 13px;">
                <span t-field="order_line.product_qty" />
                <span t-field="order_line.product_uom" groups="uom.group_uom" />
            </td>
        </xpath>
        <xpath expr="//table/tbody/tr/td[2]" position="replace">
            <td class="text-center" style="font-size: 13px;">
                <span t-field="order_line.date_planned" />
            </td>
        </xpath>
        <xpath expr="//table/tbody/tr/td[1]" position="replace">
            <td style="font-size: 13px;">
                <span t-if="order_line.description_to_print">
                    <span t-field="order_line.description_to_print" />
                </span>
            </td>
        </xpath>
        <xpath expr="//table/tbody/tr/td[3]" position="after">
            <td class="text-right" style="font-size: 13px;">
                <span t-field="order_line.price_unit" />
            </td>
            <td class="text-right" style="font-size: 13px;">
                <span t-field="order_line.price_subtotal" />
            </td>
        </xpath>
        <xpath expr="//table/tbody/tr/td[1]" position="before">
            <td class="text-left" style="font-size: 13px;">
                <span t-field="order_line.my_product_code" />
            </td>
        </xpath>

        <p t-field="o.notes" position="before">
            <div id="total" class="row justify-content-end">
                <div class="col-4">
                    <table class="table table-sm">
                        <tr class="border-black">
                            <td><strong>Subtotal</strong></td>
                            <td class="text-right">
                                <span
                  t-field="o.amount_untaxed"
                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"
                />
                            </td>
                        </tr>
                        <tr>
                            <td>Taxes</td>
                            <td class="text-right">
                                <span
                  t-field="o.amount_tax"
                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"
                />
                            </td>
                        </tr>
                        <tr class="border-black o_total">
                            <td><strong>Total</strong></td>
                            <td class="text-right">
                                <span
                  t-field="o.amount_total"
                  t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"
                />
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </p>

        <span t-field="order_line.date_planned" position="replace">
            <span t-field="order_line.date_planned_without_hour" />
        </span>
    </template>

    <template
    id="report_purchaseorder_document_inh_intecpla2"
    inherit_id="purchase_stock.report_purchaseorder_document"
  >
        <t t-else="" position="replace" />
    </template>

    <template
    id="report_purchaseorder_document_inh_intecpla"
    inherit_id="purchase.report_purchaseorder_document"
  >
        <t t-call="web.external_layout" position="attributes">
            <attribute
        name="t-call"
      >intecpla_reports.external_layout_purchase2</attribute>
        </t>
        <h2 t-if="o.state == 'draft'" position="replace" />
        <h2 t-if="o.state in ['sent', 'to approve']" position="replace" />
        <h2 t-if="o.state in ['purchase', 'done']" position="replace" />
        <h2 t-if="o.state == 'cancel'" position="replace" />
        <t t-set="address" position="replace">
            <t t-set="address">
                <br />
                <br />
                <div style="font-size:1rem">
                    <strong t-field="o.partner_id.name" />
                </div>
                <div style="font-size:1rem">
                    <span t-field="o.partner_id.street" />
                    <br />
                    <span t-field="o.partner_id.zip" />
                    <span t-field="o.partner_id.city" />
                    <span t-esc="o.partner_id.get_state_name()" />
                    <br />
                    <span t-field="o.partner_id.country_id.name" />
                </div>
            </t>
        </t>
        <t t-if="o.dest_address_id" position="replace">
            <t t-set="information_block">
                <div style="font-size:1rem">
                    <strong t-field="o.company_id.partner_id.name" />
                </div>
                <div style="font-size:1rem">
                    VAT: <span t-field="o.company_id.partner_id.vat" />
                    <br />
                    <span t-field="o.company_id.partner_id.street" />
                    <br />
                    <span t-field="o.company_id.partner_id.zip" />
                    <span t-field="o.company_id.partner_id.city" />
                    <span t-esc="o.company_id.partner_id.get_state_name()" />
                    <br />
                    <span t-field="o.company_id.partner_id.country_id.name" />
                    <br />
                    Phone: <span t-field="o.company_id.partner_id.phone" />
                    <br />
                    <span t-field="o.company_id.partner_id.email" />
                    <br />
                    <span t-field="o.company_id.partner_id.website" />
                </div>
            </t>
        </t>
        <div id="informations" position="replace">
           <div id="informations" class="row mt32 mb32">
                <div t-if="o.date_order" class="col-auto mw-100 mb-2">
                    <strong>Date:</strong>
                    <p
            t-field="o.date_order"
            class="m-0"
            t-options='{"widget": "date"}'
          />
                </div>
                <div t-if="o.name" class="col-auto mw-100 mb-2">
                    <strong>Order:</strong>
                    <p t-field="o.name" class="m-0" />
                </div>
                <div t-if="o.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Code:</strong>
                    <p t-field="o.partner_id.ref" class="m-0" />
                </div>
                <div t-if="o.partner_id.vat" class="col-auto mw-100 mb-2">
                    <strong>VAT:</strong>
                    <p t-field="o.partner_id.vat" class="m-0" />
                </div>
                <div t-if="o.partner_id.phone" class="col-auto mw-100 mb-2">
                    <strong>Phone:</strong>
                    <p t-field="o.partner_id.phone" class="m-0" />
                </div>
            </div>
        </div>


        <xpath expr="//table[1]/tbody/tr/td[3]" position="replace">
            <td class="text-center" style="font-size: 13px;">
                <span t-field="line.date_planned_without_hour" />
            </td>
        </xpath>
        <xpath expr="//table[1]/tbody/tr/td[4]" position="replace">
            <td class="text-right" style="font-size: 13px;">
                <span t-field="line.product_qty" />
                <span t-field="line.product_uom.name" groups="uom.group_uom" />
            </td>
        </xpath>
        <xpath expr="//table[1]/tbody/tr/td[5]" position="replace">
            <td class="text-right" style="font-size: 13px;">
                <span t-field="line.price_unit" />
            </td>
        </xpath>
        <xpath expr="//table[1]/tbody/tr/td[6]" position="replace">
            <td class="text-right" style="font-size: 13px;">
                <span t-field="line.discount" />
            </td>
            <td class="text-right" style="font-size: 13px;">
                <span
          t-field="line.price_subtotal"
          t-options='{"widget": "monetary", "display_currency": o.currency_id}'
        />
            </td>
        </xpath>

        <xpath expr="//table[1]/thead/tr/th[6]" position="before">
            <th class="text-right"><strong>Disc. (%)</strong></th>
        </xpath>

        <xpath expr="//table[1]/thead/tr/th[2]" position="replace" />
        <xpath expr="//table[1]/tbody/tr/td[2]" position="replace" />

        <xpath expr="//table[1]/thead/tr/th[1]" position="before">
            <th class="text-left"><strong>Code</strong></th>
        </xpath>
        <xpath expr="//table[1]/tbody/tr/td[1]" position="replace">
            <td class="text-left" style="font-size: 13px;">
                <span t-field="line.my_product_code" />
            </td>
            <td style="font-size: 13px;">
                <span t-if="line.description_to_print">
                    <span t-field="line.description_to_print" />
                </span>
            </td>
        </xpath>
    </template>

</odoo>
