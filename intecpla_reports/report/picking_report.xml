<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_picking_inh_intecpla" inherit_id="stock.report_picking">
        <t t-call="web.external_layout" position="attributes">
            <attribute name="t-call">intecpla_reports.external_layout_picking</attribute>
        </t>
        <div class="row justify-content-end mb16" position="replace" />
        <div class="page" position="before">
            <t t-set="address">
                <br/>
                <br/>
                <div>
                    <strong t-field="o.partner_id.name"/>
                </div>
                <span t-field="o.partner_id.street" />
                <br/>
                <span t-field="o.partner_id.zip" />
                <span t-field="o.partner_id.city" />
                <span t-esc="o.partner_id.get_state_name()"/>
                <br/>
                <span t-field="o.partner_id.country_id.name" />
            </t>
            <t t-set="information_block">
                <div>
                    <strong t-field="o.company_id.partner_id.name"/>
                </div>
                VAT: <span t-field="o.company_id.partner_id.vat" />
                <br/>
                <span t-field="o.company_id.partner_id.street" />
                <br/>
                <span t-field="o.company_id.partner_id.zip" />
                <span t-field="o.company_id.partner_id.city" />
                <span t-esc="o.company_id.partner_id.get_state_name()"/>
                <br/>
                <span t-field="o.company_id.partner_id.country_id.name" />
                <br/>
                Phone: <span t-field="o.company_id.partner_id.phone" />
                <br/>
                <span t-field="o.company_id.partner_id.email" />
                <br/>
                <span t-field="o.company_id.partner_id.website" />
            </t>
        </div>
        <div class="row" position="replace" >
            <div class="oe_structure"/>
        </div>
        <h1 t-field="o.name" position="replace"/>
        <table class="table table-sm" position="replace">
            <div class="row mt32 mb32" id="informations">
                <div t-if="o.scheduled_date" class="col-auto mw-100 mb-2">
                    <strong>Scheduled Date:</strong>
                    <p class="m-0" t-field="o.scheduled_date"/>
                </div>
                <div class="col-auto mw-100 mb-2">
                    <strong>Picking:</strong>
                    <p class="m-0" t-field="o.name"/>
                </div>
                <div class="col-auto mw-100 mb-2">
                    <strong>state:</strong>
                    <p class="m-0" t-field="o.state"/>
                </div>
                <div t-if="o.origin" class="col-auto mw-100 mb-2">
                    <strong>Origin:</strong>
                    <p class="m-0" t-field="o.origin"/>
                </div>
                <div t-if="o.picking_type_id.code=='incoming' and o.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Supplier:</strong>
                    <p class="m-0" t-field="o.partner_id.ref"/>
                </div>
                <div t-if="o.picking_type_id.code=='outgoing' and o.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Customer:</strong>
                    <p class="m-0" t-field="o.partner_id.ref"/>
                </div>
                <div t-if="o.partner_id.vat" class="col-auto mw-100 mb-2">
                    <strong>VAT:</strong>
                    <p class="m-0" t-field="o.partner_id.vat"/>
                </div>
                <div t-if="o.partner_id.phone" class="col-auto mw-100 mb-2">
                    <strong>Phone:</strong>
                    <p class="m-0" t-field="o.partner_id.phone"/>
                </div>
            </div>
        </table>
        <xpath expr='//table[@t-if="o.move_line_ids"]//th[1]' position='before'>
            <th name="th_code" t-if="o.picking_type_id.code=='outgoing'" class="text-left">Code</th>
        </xpath>
        <xpath expr='//span[@t-field="ml.product_id.display_name"]/..' position="replace">
            <td name="td_product_code" t-if="o.picking_type_id.code=='outgoing'" class="text-left" style="font-size: 13px;">
                <span t-if="ml.product_id.alternative_sales_code">
                    <span t-field="ml.product_id.alternative_sales_code"/>
                </span>
                <span t-if="not ml.product_id.alternative_sales_code and ml.product_id.default_code" >
                    <span t-field="ml.product_id.default_code"/>
                </span>
            </td>
            <td t-if="o.picking_type_id.code !='outgoing'" style="font-size: 13px;">
                <span t-field="ml.product_id.display_name"/><br/>
                <br/>
                <span t-field="ml.product_id.description_picking"/>
            </td>
            <td t-if="o.picking_type_id.code =='outgoing'" style="font-size: 13px;">
                <span t-if="ml.product_id.name2">
                    <span t-field="ml.product_id.name2"/>
                </span>
                <span t-if="not ml.product_id.name2">
                    <span t-field="ml.product_id.name"/>
                </span>
            </td>
        </xpath>
        
         <xpath expr="//table/tbody//tr/td[1]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody//tr/td[2]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody//tr/td[3]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody//tr/td[4]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody//tr/td[5]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody//tr/td[6]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
    </template>

    <template id="report_delivery_document_inh_intecpla" inherit_id="stock.report_delivery_document">
        <t t-call="web.external_layout" position="attributes">
            <attribute name="t-call">intecpla_reports.external_layout_picking</attribute>
        </t>
        <t name="partner_header" position="replace" />
        <h2 position="replace" />
        <table class="table table-sm" position="replace">
            <t t-set="address">
                <br/>
                <br/>
                <div>
                    <strong t-field="o.partner_id.name"/>
                </div>
                <span t-field="o.partner_id.street" />
                <br/>
                <span t-field="o.partner_id.zip" />
                <span t-field="o.partner_id.city" />
                <span t-esc="o.partner_id.get_state_name()"/>
                <br/>
                <span t-field="o.partner_id.country_id.name" />
            </t>
            <t t-set="information_block">
                <div>
                    <strong t-field="o.company_id.partner_id.name"/>
                </div>
                VAT: <span t-field="o.company_id.partner_id.vat" />
                <br/>
                <span t-field="o.company_id.partner_id.street" />
                <br/>
                <span t-field="o.company_id.partner_id.zip" />
                <span t-field="o.company_id.partner_id.city" />
                <span t-esc="o.company_id.partner_id.get_state_name()"/>
                <br/>
                <span t-field="o.company_id.partner_id.country_id.name" />
                <br/>
                Phone: <span t-field="o.company_id.partner_id.phone" />
                Fax: <span t-field="o.company_id.partner_id.fax" />
                <br/>
                <span t-field="o.company_id.partner_id.email" />
                <br/>
                <span t-field="o.company_id.partner_id.website" />
            </t>
            <div class="row mt32 mb32" id="informations">
                <div t-if="o.scheduled_date" class="col-auto mw-100 mb-2">
                    <strong>Scheduled Date:</strong>
                    <p class="m-0" t-field="o.scheduled_date"/>
                </div>
                <div class="col-auto mw-100 mb-2">
                    <strong>Picking:</strong>
                    <p class="m-0" t-field="o.name"/>
                </div>
                <div class="col-auto mw-100 mb-2">
                    <strong>state:</strong>
                    <p class="m-0" t-field="o.state"/>
                </div>
                <div t-if="o.origin" class="col-auto mw-100 mb-2">
                    <strong>Origin:</strong>
                    <p class="m-0" t-field="o.origin"/>
                </div>
                <div t-if="o.picking_type_id.code=='incoming' and o.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Supplier:</strong>
                    <p class="m-0" t-field="o.partner_id.ref"/>
                </div>
                <div t-if="o.picking_type_id.code=='outgoing' and o.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Customer:</strong>
                    <p class="m-0" t-field="o.partner_id.ref"/>
                </div>
                <div t-if="o.partner_id.vat" class="col-auto mw-100 mb-2">
                    <strong>VAT:</strong>
                    <p class="m-0" t-field="o.partner_id.vat"/>
                </div>
                <div t-if="o.partner_id.phone" class="col-auto mw-100 mb-2">
                    <strong>Phone:</strong>
                    <p class="m-0" t-field="o.partner_id.phone"/>
                </div>
            </div>
        </table>
        <xpath expr='//table[@class="table table-sm mt48"]//th[1]' position="replace">
            <th name="th_code" t-if="o.picking_type_id.code =='outgoing'"  class="text-left"><strong>Code</strong></th>
            <th><strong>Product</strong></th>
        </xpath>
         <xpath expr="//table/tbody/tr/td[1]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody/tr/td[2]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody/tr/td[3]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
         <xpath expr="//table/tbody/tr/td[4]" position="attributes">
            <attribute name="style">font-size: 13px;</attribute>
         </xpath>
        <xpath expr='//span[@t-field="move.product_id"]/..' position="replace">
            <td name="td_product_code" t-if="o.picking_type_id.code=='outgoing'" class="text-left" style="font-size: 13px;">
                <span t-if="move.product_id.alternative_sales_code">
                    <span t-field="move.product_id.alternative_sales_code"/>
                </span>
                <span t-if="not move.product_id.alternative_sales_code and move.product_id.default_code">
                    <span t-field="move.product_id.default_code"/>
                </span>
            </td>
            <td style="font-size: 13px;">
                <p t-if="o.picking_type_code != 'outgoing'">
                    <span t-field="move.product_id"/>
                </p>
                <p t-if="o.picking_type_code == 'outgoing'">
                    <span t-if="move.product_id.name2">
                        <span t-field="move.product_id.name2"/>
                    </span>
                    <span t-if="not move.product_id.name2">
                        <span t-field="move.product_id.name"/>
                    </span>
                </p>
                <p t-if="o.picking_type_code == 'incoming'">
                    <span t-field="move.product_id.sudo().description_pickingin"/>
                </p>
            </td>
        </xpath>
        <span t-field="move_line.product_id" position="replace" />
        <span t-field="move_line.product_id.sudo().description_pickingout" position="replace">
            <span t-if="move_line.product_id.alternative_sales_code">
                [<span t-field="move_line.product_id.alternative_sales_code"/>]
            </span>
            <span t-if="not move_line.product_id.alternative_sales_code and move_line.product_id.default_code">
                [<span t-field="move_line.product_id.default_code"/>]
            </span>
            <span t-if="move_line.product_id.name2">
                <span t-field="move_line.product_id.name2"/>
            </span>
            <span t-if="not move_line.product_id.name2">
                <span t-field="move_line.product_id.sudo().description_pickingout"/>
            </span>
        </span>
        <span t-field="move_line.product_id.sudo().description_pickingin" position="replace">
            <span t-field="move_line.product_id" />
            <span t-field="move_line.product_id.sudo().description_pickingin"/>
        </span>
    </template>
</odoo>
