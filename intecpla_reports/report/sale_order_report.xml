<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
    id="report_saleorder_document_inh_intecpla"
    inherit_id="sale.report_saleorder_document"
  >
        <t t-call="web.external_layout" position="attributes">
            <attribute name="t-call">intecpla_reports.external_layout_sale</attribute>
        </t>
        <t t-set="address" position="replace">
            <t t-set="address">
                <br />
                <br />
                <div>
                    <strong t-field="doc.partner_id.name" />
                </div>
                <span t-field="doc.partner_id.street" />
                <br />
                <span t-field="doc.partner_id.zip" />
                <span t-field="doc.partner_id.city" />
                <span t-esc="doc.partner_id.get_state_name()" />
                <br />
                <span t-field="doc.partner_id.country_id.name" />
            </t>
        </t>
        <xpath expr='//t[@t-set="information_block"]/..' position="replace">
            <t t-set="information_block">
                <div>
                    <strong t-field="doc.company_id.partner_id.name" />
                </div>
                VAT: <span t-field="doc.company_id.partner_id.vat" />
                <br />
                <span t-field="doc.company_id.partner_id.street" />
                <br />
                <span t-field="doc.company_id.partner_id.zip" />
                <span t-field="doc.company_id.partner_id.city" />
                <span t-esc="doc.company_id.partner_id.get_state_name()" />
                <br />
                <span t-field="doc.company_id.partner_id.country_id.name" />
                <br />
                Phone: <span t-field="doc.company_id.partner_id.phone" />
                <br />
                <span t-field="doc.company_id.partner_id.email" />
                <br />
                <span t-field="doc.company_id.partner_id.website" />
            </t>
        </xpath>
        <h2 position="replace" />
        <div id="informations" position="replace">
            <div class="row mt32 mb32" id="informations">
                <div
          t-if="doc.confirmation_date and doc.state not in ['draft','sent']"
          class="col-auto mw-100 mb-2"
        >
                    <strong>Confirmation date:</strong>
                    <p
            class="m-0"
            t-field="doc.confirmation_date"
            t-options='{"widget": "date"}'
          />
                </div>
                <div
          t-if="doc.date_order and doc.state in ['draft','sent']"
          class="col-auto mw-100 mb-2"
        >
                    <strong>Quotation date:</strong>
                    <p
            class="m-0"
            t-field="doc.date_order"
            t-options='{"widget": "date"}'
          />
                </div>
                <div
          t-if="doc.validity_date and doc.state in ['draft', 'sent']"
          class="col-auto mw-100 mb-2"
        >
                    <strong>Validity date:</strong>
                    <p class="m-0" t-field="doc.validity_date" />
                </div>
                <div t-if="doc.name" class="col-auto mw-100 mb-2">
                    <strong>Order:</strong>
                    <p class="m-0" t-field="doc.name" />
                </div>
                <div t-if="doc.partner_id.ref" class="col-auto mw-100 mb-2">
                    <strong>Customer:</strong>
                    <p class="m-0" t-field="doc.partner_id.ref" />
                </div>
                <div t-if="doc.partner_id.vat" class="col-auto mw-100 mb-2">
                    <strong>VAT:</strong>
                    <p class="m-0" t-field="doc.partner_id.vat" />
                </div>
                <div t-if="doc.partner_id.phone" class="col-auto mw-100 mb-2">
                    <strong>Phone:</strong>
                    <p class="m-0" t-field="doc.partner_id.phone" />
                </div>
                <div
          name="payment_term"
          t-if="doc.payment_term_id"
          class="col-auto mw-100 mb-2"
        >
                    <strong>Payment Terms:</strong>
                    <p class="m-0" t-field="doc.payment_term_id" />
                </div>
            </div>
        </div>
        <xpath
      expr="//table[@class='table table-sm o_main_table']/thead/tr[1]"
      position="replace"
    >
             <tr>
                 <t t-set="colspan" t-value="5" />
                 <th name="th_code" class="text-left">Code</th>
                 <th name="th_description" class="text-left">Description</th>
                 <th
          name="th_deliver_date"
          t-if="doc.print_commitment_date == True"
          class="text-right"
        >Deliver date</th>
                 <th name="th_quantity" class="text-right">Quantity</th>
                 <th name="th_priceunit" class="text-right">Unit Price</th>
                 <th
          name="th_discount"
          t-if="display_discount"
          class="text-right"
          groups="sale.group_discount_per_so_line"
        >
                     <span>Disc.(%)</span>
                     <!-- TODO: remove in master -->
                     <t t-set="colspan" t-value="colspan+1" />
                 </th>
                 <th name="th_subtotal" class="text-right">
                     <t
            groups="account.group_show_line_subtotals_tax_excluded"
          >Amount</t>
                     <t
            groups="account.group_show_line_subtotals_tax_included"
          >Total Price</t>
                 </th>
             </tr>
        </xpath>
        <t t-if="not line.display_type" position="replace">
             <t t-if="not line.display_type">
                 <td name="td_product_code" style="font-size: 13px;">
                     <span t-if="line.product_id.alternative_sales_code">
                         <span t-field="line.product_id.alternative_sales_code" />
                     </span>
                     <span
            t-if="not line.product_id.alternative_sales_code and line.product_id.default_code"
          >
                         <span t-field="line.product_id.default_code" />
                     </span>
                 </td>
                 <td name="td_name" style="font-size: 13px;">
                    <span t-if="line.product_id.name2">
                        <span t-field="line.product_id.name2" />
                    </span>
                    <span t-if="not line.product_id.name2">
                        <span t-field="line.product_id.name" />
                    </span>
                  </td>
                 <td
          name="td_commitment-date"
          t-if="doc.print_commitment_date == True"
          class="text-right"
          style="font-size: 13px;"
        >
                    <p
            class="m-0"
            t-field="line.commitment_date"
            t-options='{"widget": "date"}'
          />
                 </td>
                 <td name="td_quantity" class="text-right" style="font-size: 13px;">
                     <span t-field="line.product_uom_qty" />
                     <span t-field="line.product_uom" groups="uom.group_uom" />
                 </td>
                 <td name="td_priceunit" class="text-right" style="font-size: 13px;">
                     <span t-field="line.price_unit" />
                 </td>
                 <td
          t-if="display_discount"
          class="text-right"
          groups="sale.group_discount_per_so_line"
          style="font-size: 13px;"
        >
                     <span t-field="line.discount" />
                 </td>
                 <td
          name="td_subtotal"
          class="text-right o_price_total"
          style="font-size: 13px;"
        >
                     <span
            t-field="line.price_subtotal"
            groups="account.group_show_line_subtotals_tax_excluded"
          />
                     <span
            t-field="line.price_total"
            groups="account.group_show_line_subtotals_tax_included"
          />
                 </td>
             </t>
        </t>
        <td name="td_amount_by_group_label_3" position="replace">
            <td name="td_amount_by_group_label_3">
                <span t-esc="amount_by_group[0]" />

            </td>
        </td>
        <td name="td_note_line" position="replace">
            <td name="td_note_line" colspan="99" style="font-size: 13px;">
                <span t-field="line.name" />
            </td>
        </td>
        <td name="td_section_line" position="replace">
            <td name="td_section_line" colspan="99" style="font-size: 13px;">
                <span t-field="line.name" />
            </td>
        </td>
    </template>
</odoo>
