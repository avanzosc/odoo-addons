<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Adding files">
        <xpath expr="." position="inside">
            <script type="text/javascript" src="/website_supplier_zone_filter/static/src/js/website.js"></script>
            <link rel="stylesheet" href="/website_supplier_zone_filter/static/src/css/style.css" />
        </xpath>
    </template>

    <template id="website_supplier_filters_zone" name="Members zones" inherit_id="website_sale.products"
        priority="30">
        <xpath expr="//div[@id='products_grid_before']" position="inside">
            <t t-if="members_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>Members</h3>
                    </li>
                    <select class="form-control" name="member" id="product_member_dropdown">
                        <t t-foreach="member_ids" t-as="member">
                            <option
                                t-att-value="request.httprequest.path + '?' + keep_query('*', member=member.id)"
                                t-att-selected="member.id">
                                <t t-esc="member.name" />
                            </option>
                        </t>
                        <option
                            t-att-value="request.httprequest.path + '?' + keep_query('*', member='All members')"
                            selected="All members">All members</option>
                    </select>
                </ul>
            </t>
            <t t-if="states_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>States</h3>
                    </li>
                    <select class="form-control" name="state" id="product_state_dropdown">
                        <t t-foreach="state_ids" t-as="state">
                            <option
                                t-att-value="request.httprequest.path + '?' + keep_query('*', state=state.id)"
                                t-att-selected="state.id">
                                <t t-esc="state.name" />
                            </option>
                        </t>
                        <option
                            t-att-value="request.httprequest.path + '?' + keep_query('*', state='All states')"
                            selected="All states">All states</option>
                    </select>
                </ul>
            </t>
            <t t-if="zones_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>Zones</h3>
                    </li>
                    <select class="form-control" name="state" id="product_zone_dropdown">
                        <t t-foreach="zone_ids" t-as="zone">
                            <option t-att-value="request.httprequest.path + '?' + keep_query('*', zone=zone.id)"
                                t-att-selected="zone.id">
                                <t t-esc="zone.name" />
                            </option>
                        </t>
                        <option t-att-value="request.httprequest.path + '?' + keep_query('*', state='All zones')"
                            selected="All zones">All zones</option>
                    </select>
                </ul>
            </t>
            <t t-if="cities_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>Cities</h3>
                    </li>
                    <select class="form-control" name="state" id="product_city_dropdown">
                        <t t-foreach="city_ids" t-as="city">
                            <option t-att-value="request.httprequest.path + '?' + keep_query('*', city=city)"
                                t-att-selected="city">
                                <t t-esc="city" />
                            </option>
                        </t>
                        <option t-att-value="request.httprequest.path + '?' + keep_query('*', city='All cities')"
                            selected="All cities">All cities</option>
                    </select>
                </ul>
            </t>
        </xpath>

        <xpath expr="//div[@id='products_grid']" position="replace">
            <t t-if="layout_mode == 'grid'">
                <div class="col-lg-9" id="products_grid">
                    <div class="container">
                        <div class="row">
                            <t t-foreach="products" t-as="product">
                                <div class="col-md-4 mx-auto m-2 product-grid-card">
                                    <div class="card align-items-center">
                                        <a itemprop="url" class="card-img-top"
                                            t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))"
                                            t-field="product.image_128"
                                            t-options='{"widget": "image", "class": "media-object mr-3 mx-auto"}'>
                                        </a>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <div id="product-grid-id" style="display:none;">
                                                        <span itemprop="id">
                                                            <t t-esc="product.product_variant_id.id" />
                                                        </span>
                                                    </div>
                                                    <h5 class="card-title">
                                                        <a itemprop="name"
                                                            t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))"
                                                            t-att-content="product.name" t-field="product.name" />
                                                    </h5>
                                                </div>
                                                <div class="col-md-4">
                                                    <t t-if="product.list_price">
                                                        <td>
                                                            <span itemprop="price">
                                                                <t t-esc="product.list_price" />
                                                                €
                                                            </span>
                                                        </td>
                                                    </t>
                                                </div>
                                            </div>
                                            <p class="card-text">
                                                <small>
                                                    <t t-esc="product.description_sale" />
                                                </small>
                                            </p>
                                            <div class="row product-seller-list">
                                                <t t-foreach="product.seller_ids" t-as="supplier">
                                                    <div class="col-md-6 seller mx-auto">
                                                        <p>
                                                            <i class="fa fa-home"></i>
                                                        </p>
                                                        <p>
                                                            <span itemprop="supplier_name">
                                                                <small>
                                                                    <b>
                                                                        <t t-esc="supplier.name.name" />
                                                                    </b>
                                                                </small>
                                                            </span>
                                                        </p>
                                                        <p>
                                                            <span itemprop="address_state">
                                                                <small>
                                                                    <t t-esc="supplier.supplier_state.name" />
                                                                </small>
                                                            </span>
                                                        </p>
                                                        <p>
                                                            <span itemprop="address_zone">
                                                                <small>
                                                                    <t t-esc="supplier.supplier_zone.name" />
                                                                </small>
                                                            </span>
                                                        </p>
                                                        <p>
                                                            <span itemprop="address_city">
                                                                <small>
                                                                    <t t-esc="supplier.supplier_city" />
                                                                </small>
                                                            </span>
                                                        </p>
                                                    </div>
                                                </t>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="text-center td-qty">
                                                        <div
                                                            class="css_quantity input-group mx-auto oe_website_spinner">
                                                            <div class="input-group-prepend">
                                                                <a t-attf-href="#"
                                                                    class="btn btn-link js_add_cart_json d-none d-md-inline-block"
                                                                    aria-label="Remove one" title="Remove one">
                                                                    <i class="fa fa-minus"></i>
                                                                </a>
                                                            </div>
                                                            <input type="text"
                                                                class="js_quantity form-control quantity" value="0"
                                                                name="quant" />
                                                            <div class="input-group-append">
                                                                <a t-attf-href="#"
                                                                    class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block"
                                                                    aria-label="Add one" title="Add one">
                                                                    <i class="fa fa-plus"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <form action="/shop/cart/update" method="post">
                                                        <button type="submit"
                                                            class="nav-link product-cart-button">
                                                            <i class="fa fa-shopping-cart"></i>
                                                            Cart
                                                            <sup t-attf-class="my_cart_quantity badge badge-primary" />
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
            <t t-else="">
                <div class="col-lg-9" id="products_grid">
                    <table width="100%">
                        <thead>
                            <tr>
                                <th colspan="2">Product</th>
                                <th>Supplier</th>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th style="display:none;">Cart</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="products" t-as="product">
                                <td>
                                    <a itemprop="url"
                                        t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))"
                                        t-field="product.image_128"
                                        t-options='{"widget": "image", "class": "media-object mr-3"}'>
                                    </a>
                                </td>
                                <td style="display:none;">
                                    <span itemprop="id">
                                        <t t-esc="product.product_variant_id.id" />
                                    </span>
                                </td>
                                <td>
                                    <a itemprop="name"
                                        t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))"
                                        t-att-content="product.name" t-field="product.name" />
                                    <span itemprop="description">
                                        <small>
                                            <t t-esc="product.description_sale" />
                                        </small>
                                    </span>
                                </td>
                                <td>
                                    <div class="row">
                                        <t t-foreach="product.seller_ids" t-as="supplier">
                                            <div class="col-md-6 seller mx-auto">
                                                <p>
                                                    <i class="fa fa-home"></i>
                                                </p>
                                                <p>
                                                    <span itemprop="supplier_name">
                                                        <small>
                                                            <b>
                                                                <t t-esc="supplier.name.name" />
                                                            </b>
                                                        </small>
                                                    </span>
                                                </p>
                                                <p>
                                                    <span itemprop="address_state">
                                                        <small>
                                                            <t t-esc="supplier.supplier_state.name" />
                                                        </small>
                                                    </span>
                                                </p>
                                                <p>
                                                    <span itemprop="address_zone">
                                                        <small>
                                                            <t t-esc="supplier.supplier_zone.name" />
                                                        </small>
                                                    </span>
                                                </p>
                                                <p>
                                                    <span itemprop="address_city">
                                                        <small>
                                                            <t t-esc="supplier.supplier_city" />
                                                        </small>
                                                    </span>
                                                </p>
                                            </div>
                                        </t>
                                    </div>
                                </td>
                                <t t-if="product.list_price">
                                    <td>
                                        <span itemprop="price">
                                            <t t-esc="product.list_price" />
                                            €
                                        </span>
                                    </td>
                                </t>
                                <td>
                                    <div class="text-center td-qty">
                                        <div class="css_quantity input-group mx-auto oe_website_spinner">
                                            <div class="input-group-prepend">
                                                <a t-attf-href="#"
                                                    class="btn btn-link js_add_cart_json d-none d-md-inline-block"
                                                    aria-label="Remove one" title="Remove one">
                                                    <i class="fa fa-minus"></i>
                                                </a>
                                            </div>
                                            <input type="text" class="js_quantity form-control quantity" value="0"
                                                name="quant" />
                                            <div class="input-group-append">
                                                <a t-attf-href="#"
                                                    class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block"
                                                    aria-label="Add one" title="Add one">
                                                    <i class="fa fa-plus"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <form action="/shop/cart/update" method="post">
                                        <button type="submit" class="nav-link product-cart-button">
                                            <i class="fa fa-shopping-cart"></i>
                                            Cart
                                            <sup t-attf-class="my_cart_quantity badge badge-primary" />
                                        </button>
                                    </form>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </t>
        </xpath>
    </template>
</odoo>
