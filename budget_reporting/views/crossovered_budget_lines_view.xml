<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <record model="ir.ui.view" id="product_budget_line_form_view">
            <field name="name">product.budget.line.form</field>
            <field name="model">product.budget.line</field>
            <field name="arch" type="xml">
                <form string="Product Budget Line">
                    <field name="budget_line_id" select="1" />
                    <separator string="" colspan="4" />
                    <newline />
                    <field name="product_id" select="1" />
                    <newline />
                    <group colspan="4" col="6">
                        <separator string="Expected Data"
                                   colspan="6" />
                        <newline />
                        <field name="expected_qty" select="1" />
                        <field name="expected_price" select="1" />
                        <field name="expected_subtotal" select="1" />
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="product_budget_line_tree_view">
            <field name="name">product.budget.line.tree</field>
            <field name="model">product.budget.line</field>
            <field name="arch" type="xml">
                <tree string="Product Budget Line" editable="top">
                    <field name="product_id" />
                    <field name="expected_qty" />
                    <field name="expected_price" />
                    <field name="expected_subtotal" />
                    <field name="real_qty" />
                    <field name="real_amount" />
                    <field name="real_subtotal" />
                    <field name="budget_line_id" invisible="1" />
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="product_budget_line_tree_view_ext">
            <field name="name">product.budget.line.tree</field>
            <field name="model">product.budget.line</field>
            <field name="priority" eval="30" />
            <field name="arch" type="xml">
                <tree string="Product Budget Line">
                    <field name="analytic_account" invisible="1"
                            readonly="1" />
                    <field name="period_id" invisible="1"
                            readonly="1" />
                    <field name="date_start" readonly="1" />
                    <field name="date_end" readonly="1" />
                    <field name="partner_id" readonly="1" />
                    <field name="product_id" />
                    <field name="categ_id" readonly="1" />
                    <field name="prod_type" readonly="1" />
                    <field name="expected_qty" />
                    <field name="expected_price" />
                    <field name="expected_subtotal" />
                    <field name="real_qty" />
                    <field name="real_amount" />
                    <field name="real_subtotal" />
                    <field name="budget_line_id" invisible="1" />
                    <field name="crossovered_budget_id" invisible="1"
                        readonly="1" />
                </tree>
            </field>
        </record>

        <record id="product_budget_line_search_view" model="ir.ui.view">
            <field name="name">product.budget.line.search</field>
            <field name="model">product.budget.line</field>
            <field name="arch" type="xml">
                <search string="Product Budget Line">
                    <field name="product_id" />
                    <field name="categ_id" />
                    <field name="prod_type" />
                    <field name="crossovered_budget_id" />
                    <field name="budget_line_id" />
                    <separator string="" orientation="vertical" />
                    <field name="period_id" />
                    <field name="date_start" />
                    <field name="date_end" />
                    <newline />
                    <field name="analytic_account" />
                    <field name="partner_id" />
                    <separator string="" orientation="vertical" />
                    <field name="expected_qty" />
                    <field name="expected_price" />
                    <field name="expected_subtotal" />
                    <newline />
                    <group expand="0" string="Group By...">
                        <filter string="Product" domain="[]"
                                context="{'group_by':'product_id'}" icon="terp-product" />
                        <filter string="Category" domain="[]"
                                context="{'group_by':'categ_id'}" icon="terp-stock_symbol-selection" />
                        <filter string="Product type" domain="[]"
                                context="{'group_by':'prod_type'}" icon="terp-stock_effects-object-colorize" />
                        <separator string="" orientation="vertical" />
                        <filter string="Budget"
                                context="{'group_by':'crossovered_budget_id'}"
                                icon="terp-folder-blue" />
                        <filter string="Budget Line" domain="[]"
                                context="{'group_by':'budget_line_id'}"
                                icon="terp-folder-green" />
                        <separator string="" orientation="vertical" />
                        <filter string="Analytic account"
                                context="{'group_by':'analytic_account'}"
                                icon="terp-folder-yellow" />
                        <filter string="Partner"
                                context="{'group_by':'partner_id'}" icon="terp-partner" />
                        <separator string="" orientation="vertical" />
                        <filter string="Period" context="{'group_by':'period_id'}"
                                icon="terp-go-month" />
                        <filter string="Date"
                                context="{'group_by':'date_start'}" icon="terp-go-today" />
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="act_product_budget_line">
            <field name="name">Product Budget Line</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.budget.line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="act_view_product_budget_tree" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="act_product_budget_line" />
            <field name="view_mode">tree</field>
            <field name="view_id" ref="product_budget_line_tree_view_ext" />
            <field eval="1" name="sequence" />
        </record>
        <record id="act_view_product_budget_form" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="act_product_budget_line" />
            <field name="view_mode">form</field>
            <field name="view_id" ref="product_budget_line_form_view" />
            <field eval="2" name="sequence" />
        </record>
        <record id="crossovered_budget_lines_search_view" model="ir.ui.view">
            <field name="name">crossovered.budget.lines.search</field>
            <field name="model">crossovered.budget.lines</field>
            <field name="arch" type="xml">
                <search string="Budget Lines">
                    <field name="crossovered_budget_id" />
                    <field name="general_budget_id" />
                    <field name="analytic_account_id" />
                    <field name="partner_id" />
                    <field name="period_id" />
                    <field name="date_from" />
                    <field name="date_to" />
                    <field name="planned_amount" />
                    <newline />
                    <group expand="0" string="Group By...">
                        <filter string="Budget"
                            context="{'group_by':'crossovered_budget_id'}"
                            icon="terp-folder-blue" />
                        <separator string="" orientation="vertical" />
                        <filter string="Analytic account"
                            context="{'group_by':'analytic_account_id'}"
                            icon="terp-folder-yellow" />
                        <filter string="Partner"
                            context="{'group_by':'partner_id'}" icon="terp-partner" />
                        <separator string="" orientation="vertical" />
                        <filter string="Period" context="{'group_by':'period_id'}"
                            icon="terp-go-month" />
                        <filter string="Date" context="{'group_by':'date_from'}"
                            icon="terp-go-today" />
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="crossovered_budget_lines_tree_inh_view">
            <field name="name">crossovered.budget.lines.inh.tree</field>
            <field name="model">crossovered.budget.lines</field>
            <field name="inherit_id"
                ref="account_budget.view_crossovered_budget_line_tree" />
            <field name="arch" type="xml">
                <field name="analytic_account_id" position="after">
                    <field name="partner_id" />
                    <field name="period_id" invisible="1" />
                </field>
            </field>
        </record>

        <record model="ir.ui.view" id="crossovered_budget_lines_ava_view">
            <field name="name">crossovered.budget.lines.ava.form</field>
            <field name="model">crossovered.budget.lines</field>
            <field name="priority" eval="10" />
            <field name="arch" type="xml">
                <form string="Crossovered Budget Line">
                    <group colspan="4" col="6">
                        <field name="crossovered_budget_id"
                            select="1" />
                        <field name="general_budget_id" select="1" />
                        <button name="load_product_accounts"
                            string="Load Accounts" type="object" />
                    </group>
                    <group colspan="4" col="6">
                        <field name="analytic_account_id" select="1" />
                        <newline />
                        <field name="partner_id" select="1" />
                    </group>
                    <group colspan="4" col="6">
                        <field name="period_id" select="1" />
                        <field name="date_from" required="1"
                            select="1" />
                        <field name="date_to" required="1" select="1" />
                        <newline />
                        <field name="planned_amount" select="1" />
                        <field name="practical_amount" />
                        <field name="general_amount" />
                    </group>
                    <field name="product_budget_ids" nolabel="1"
                        colspan="4" />
                    <field name="es_trimestral" invisible="1" />
                    <group colspan="3" col="4"
                        attrs="{'invisible':[('es_trimestral','=',False)]}">
                        <separator colspan="4"
                            string="The date range is greater than one month" />
                        <button name="dividir_trimestres" string="Split"
                            type="object" icon="gtk-split" />
                        <button name="copiar_trimestres" string="Copy"
                            type="object" icon="gtk-copy" />
                    </group>
                    <button name="copy_period" type="object"
                        icon="gtk-go" string="Copy for new period"
                        attrs="{'invisible':[('es_trimestral','=',True)]}" />
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_crossovered_budget_line_ava">
            <field name="name">Crossovered Budget Lines</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">crossovered.budget.lines</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="act_view_ava_crossovered_line_form" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="action_crossovered_budget_line_ava" />
            <field name="view_mode">form</field>
            <field name="view_id" ref="crossovered_budget_lines_ava_view" />
            <field eval="5" name="sequence" />
        </record>
        <record id="act_view_ava_crossovered_line_tree" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="action_crossovered_budget_line_ava" />
            <field name="view_mode">tree</field>
            <field name="view_id"
                ref="account_budget.view_crossovered_budget_line_tree" />
            <field eval="1" name="sequence" />
        </record>

        <record model="ir.ui.view" id="crossovered_budget_inh_form">
            <field name="name">crossovered.budget.inh.form</field>
            <field name="model">crossovered.budget</field>
            <field name="inherit_id"
                ref="account_budget.crossovered_budget_view_form" />
            <field name="arch" type="xml">
                <xpath
                    expr="//form//tree//field[@name='analytic_account_id']"
                    position="after">
                    <field name="partner_id" />
                </xpath>
                <xpath expr="//field[@name='crossovered_budget_line']/form"
                    position="replace" />
            </field>
        </record>

        <menuitem id="budget_line_menu" parent="account_budget.next_id_31"
            action="action_crossovered_budget_line_ava" string="Budget Lines" />
        <menuitem id="prod_budget_line_menu" parent="account_budget.next_id_31"
            action="act_product_budget_line" string="Product Budget Lines" />

    </data>
</openerp>
