<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Adding files">
        <xpath expr="." position="inside">
            <script type="text/javascript" src="/website_membership_format/static/src/js/website.js"></script>
            <link rel="stylesheet" href="/website_membership_format/static/src/css/style.css" />
        </xpath>
    </template>

    <template id="website_membership_format_template" name="Members membership 
  format"
        inherit_id="website_membership.index" priority="50">
        <xpath expr="//div[@class='media mt-3']" position="replace">
            <div class="row mx-auto mt-2">
                <div class="col-md-3">
                    <a t-attf-href="/members/#{slug(partner)}" t-field="partner.image_128"
                        t-options='{"widget": "image", "class": "media-object mr-3"}'></a>
                </div>
                <div class="col-md-6">
                    <div class="row">
                        <a t-attf-href="/members/#{slug(partner)}">
                            <span t-field="partner.display_name" />
                        </a>
                        <div t-field="partner.website_short_description" />
                    </div>
                    <div class="row mt-2">
                        <div class="col">
                            <t t-if="partner.phone">
                                <p>
                                    <i class="fa fa-phone"></i>
                                    <em>
                                        <t t-esc="partner.phone" />
                                    </em>
                                </p>
                            </t>
                            <t t-if="partner.mobile">
                                <p>
                                    <i class="fa fa-mobile"></i>
                                    <em>
                                        <t t-esc="partner.mobile" />
                                    </em>
                                </p>
                            </t>
                            <t t-if="partner.email">
                                <p>
                                    <i class="fa fa-envelope"></i>
                                    <em>
                                        <t t-esc="partner.email" />
                                    </em>
                                </p>
                            </t>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <t t-if="partner.country_id or partner.state_id or partner.city or partner.partner_zone_id">
                        <p>
                            <i class="fa fa-home"></i>
                        </p>
                        <t t-if="partner.country_id.name">
                            <p>
                                <em>
                                    <t t-esc="partner.country_id.name" />
                                </em>
                            </p>
                        </t>
                        <t t-if="partner.state_id.name">
                            <p>
                                <em>
                                    <t t-esc="partner.state_id.name" />
                                </em>
                            </p>
                        </t>
                        <t t-if="partner.city">
                            <p>
                                <em>
                                    <t t-esc="partner.city" />
                                    <t t-if="partner.zip">
                                        -
                                        <t t-esc="partner.zip" />
                                    </t>
                                </em>
                            </p>
                        </t>
                        <t t-if="partner.partner_zone_id.name">
                            <p>
                                <em>
                                    <t t-esc="partner.partner_zone_id.name" />
                                </em>
                            </p>
                        </t>
                    </t>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[@id='left_column']" position="inside">
            <t t-if="states_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>States</h3>
                    </li>
                    <select class="form-control" name="state" id="product_state_dropdown">
                        <t t-foreach="state_ids" t-as="state">
                            <option
                                t-att-value="request.httprequest.path + '?' + keep_query('*', state=state.id)"
                                t-att-selected="state.id">
                                <t t-esc="state.name" />
                            </option>
                        </t>
                        <option
                            t-att-value="request.httprequest.path + '?' + keep_query('*', state='All states')"
                            selected="All states">All states</option>
                    </select>
                </ul>
            </t>
            <t t-if="zones_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>Zones</h3>
                    </li>
                    <select class="form-control" name="state" id="product_zone_dropdown">
                        <t t-foreach="zone_ids" t-as="zone">
                            <option t-att-value="request.httprequest.path + '?' + keep_query('*', zone=zone.id)"
                                t-att-selected="zone.id">
                                <t t-esc="zone.name" />
                            </option>
                        </t>
                        <option t-att-value="request.httprequest.path + '?' + keep_query('*', state='All zones')"
                            selected="All zones">All zones</option>
                    </select>
                </ul>
            </t>
            <t t-if="cities_total > 0">
                <ul class="nav nav-pills flex-column mt16">
                    <li class="nav-header nav-item">
                        <h3>Cities</h3>
                    </li>
                    <select class="form-control" name="state" id="product_city_dropdown">
                        <t t-foreach="city_ids" t-as="city">
                            <option t-att-value="request.httprequest.path + '?' + keep_query('*', city=city)"
                                t-att-selected="city">
                                <t t-esc="city" />
                            </option>
                        </t>
                        <option t-att-value="request.httprequest.path + '?' + keep_query('*', city='All cities')"
                            selected="All cities">All cities</option>
                    </select>
                </ul>
            </t>
        </xpath>
    </template>

    <template id="website_membership_details_format_template" name="Members membership details
  format"
        inherit_id="website_partner.partner_detail" priority="50">
        <xpath expr="//div[@class='col-lg-8 mt32']" position="inside">
            <div class="panel panel-default">
                <div class="panel-body">
                    <t t-if="products">
                        <table class="table" id="membership_details_product_table">
                            <thead>
                                <tr>
                                    <th style="display:none;">Id</th>
                                    <th colspan="2">Product</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="products" t-as="product">
                                    <tr>
                                        <td style="display:none;">
                                            <t t-esc="product.product_tmpl_id.id" />
                                        </td>
                                        <td>
                                            <a href="#" t-field="product.product_tmpl_id.image_128"
                                                t-options='{"widget": "image", "class": "media-object"}'></a>
                                        </td>
                                        <td>
                                            <t t-esc="product.product_tmpl_id.name" />
                                            -
                                            <t t-esc="product.product_tmpl_id.uom_name" />
                                        </td>
                                        <td>
                                            <t t-esc="product.product_tmpl_id.list_price" />
                                        </td>
                                        <td>
                                            <div class="text-center td-qty">
                                                <div class="css_quantity input-group mx-auto oe_website_spinner">
                                                    <div class="input-group-prepend">
                                                        <a t-attf-href="#"
                                                            class="btn btn-link js_add_cart_json d-none d-md-inline-block"
                                                            aria-label="Remove one" title="Remove one">
                                                            <i class="fa fa-minus"></i>
                                                        </a>
                                                    </div>
                                                    <input type="text" class="js_quantity form-control quantity"
                                                        value="0" name="quant" />
                                                    <div class="input-group-append">
                                                        <a t-attf-href="#"
                                                            class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block"
                                                            aria-label="Add one" title="Add one">
                                                            <i class="fa fa-plus"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <form action="/shop/cart/update" method="post">
                                                <button type="submit" class="nav-link">
                                                    <i class="fa fa-shopping-cart"></i>
                                                    Cart
                                                    <sup t-attf-class="my_cart_quantity badge badge-primary" />
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </t>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[@t-field='partner.self']" position="before">
            <span id="partner_zone">
                <t t-esc="partner.partner_zone_id.name" />
            </span>
        </xpath>
    </template>
</odoo>
